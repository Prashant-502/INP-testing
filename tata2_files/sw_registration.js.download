var notData={},wlcmEnabled=0;if("sellonline.tataaia.com"==document.location.host)var macros={sw:"/wps/PA_TATAAIA_BO/lemnisk/lemniskSDKWorker.js",customOptinStatus:null,migdomain:"/lemnisk/",hasMigration:!0};else var macros={sw:"/lemnisk/lemniskSDKWorker.js",customOptinStatus:null,migdomain:"/lemnisk/",hasMigration:!0};var __vizpush=__vizpush||{IframeEle:null,ContainerHtmlId:"viz-push-container",version:"1",advid:"VIZVRM6453",target:"mu-pl.lemnisk.co",domain:macros.domain,migDomain:macros.migdomain,hasMigration:macros.hasMigration,isCOActive:macros.customOptinStatus,dailyCookie:"_vwpnsent",stateCookie:"_vwpnstate",fcmMigCookie:"_vwpnfcm",pushSuppCookie:"_vwpnsupp",fpc:"_vz",prevState:"",fcmMigState:"",vapidPublicKey:"BD_NJRY6MAEN3Hps2_IpBmVbFPv_QJuBlk8ss1_2ICwit-jO36ljf05hbjEVWXfD-1YgYueZzhb6X5LbhUoBIg8",swLoc:macros&&macros.sw?macros.sw:"/lemnisk/lemniskSDKWorker.js",mobileOnly:macros.mobileOnly?macros.mobileOnly:0,timeout:macros.timeout?macros.timeout:12e4,first:!1,ctaUrls:["lp1","lp2"],uuid:"",cont:'<style> .vizury-notification { display: block; overflow: hidden; border: 0px; position: fixed; z-index: 199999980;}</style> <iframe id = "http-push" class="vizury-notification" width="100%" height="100%"></iframe>',iframeContent:"",getCookie:function(i){var t=document.cookie;if(!i)return"";var e=t.split(";");for(var s in e)if(e.hasOwnProperty(s)){var n=e[s].match(/\s*(.*)=(.*)/);if(n&&n[1]===i&&n[2])return decodeURIComponent(n[2])}return""},setCookie:function(i,t,e,s){var n=s||__vizpush.domain;if(e&&e>0){var o=new Date;o.setDate(o.getDate()+e);var a=encodeURIComponent(t)+"; expires="+o.toUTCString()+"; path=/";n&&(a+="; domain="+n),document.cookie=i+"="+a}else document.cookie=i+"="+encodeURIComponent(t)},createDivElement:function(){var i=document.createElement("div");i.id=__vizpush.ContainerHtmlId,document.body.appendChild(i),__vizpush.SetDivContent()},close:function(){var i=document.getElementById("http-push");i&&(i.style.display="none")},showOptin:function(){return!!(!__vizpush.mobileOnly||__vizpush.mobileOnly&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))},SetDivContent:function(i){document.getElementById(__vizpush.ContainerHtmlId).innerHTML=__vizpush.cont,__vizpush.SetIframeContent(__vizpush.iframeContent),__vizpush.IdentifyEvent()},SetIframeContent:function(i){var t=document.getElementById("http-push").contentWindow.document;t.open(),t.write("<!DOCTYPE html>"),t.write(i),t.close(),__vizpush.IframeEle=parent.document.getElementById("http-push")},transAnimationTopAndBottom:function(i,t,e,s){var n=setInterval(function(){i.style[t]=e+"px",s<0?(e-=2)<s&&(i.style[t]=s+"px",clearInterval(n)):(e+=2)>s&&(i.style[t]=s+"px",clearInterval(n))},1)},triggerNotiBottom:function(i,t){__vizpush.transAnimationTopAndBottom(i,"bottom",t,0)},triggerNotiTop:function(i,t){__vizpush.transAnimationTopAndBottom(i,"top",t,0)},IdentifyEvent:function(){__vizpush.IframeEle.style.top="-136px",setTimeout(function(){__vizpush.triggerNotiTop(__vizpush.IframeEle,parseInt("-136px"))},1)},hasPushSupport:function(){if(/Chrome\/([0-9]+)\./.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)&&!/OPR\/([0-9]+)\./.test(navigator.userAgent)){var i=navigator.userAgent.match(/Chrome\/([0-9]+)\./)[1];if(i>=50)return!0}else if(/Firefox\/([0-9]+)\./.test(navigator.userAgent)){var i=navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1];if(i>=46)return!0}else if(/OPR\/([0-9]+)\./.test(navigator.userAgent)){var i=navigator.userAgent.match(/OPR\/([0-9]+)\./)[1];if(i>=48)return!0}return!1},logState:function(i,t,e){var s="";if(__vizpush.prevState!==i){__vizpush.setCookie(__vizpush.stateCookie,i,1);var n=encodeURIComponent(document.URL),o="?version="+__vizpush.version+"&advid="+__vizpush.advid+"&action="+i+"&origin="+n;t?("custom"===e&&(o+="&type=HTTPSCO"),s="https://"+__vizpush.target+"/analyze/optinInfo"+o):s="https://"+__vizpush.target+"/analyze/subMap"+o,__vizpush.first&&(s+="&useraction=1"),fetch(s,{credentials:"include"})}},logError:function(i){var t=encodeURIComponent(i);fetch("https://"+__vizpush.target+"/analyze/error?message="+t+"&advid="+__vizpush.advid+"&version="+__vizpush.version,{credentials:"include"})},logEvent:function(i,t,e,s){fetch("https://"+__vizpush.target+"/analyze/notification?&version="+__vizpush.version+"&engid="+i+"&action="+e+"&tag="+t+"&ts="+s+"&advid="+__vizpush.advid,{credentials:"include"})},dismissNotification:function(i,t){setTimeout(function(){i.getNotifications().then(function(i){for(var e=(new Date).getTime(),s=0;s<i.length;s++)i[s].data.uuid===__vizpush.uuid&&(i[s].close(),logEvent(t.engid,t.uuid,"DISMISS",e))})},__vizpush.timeout)},sendWlPush:function(i){var t=(new Date).getTime();__vizpush.uuid=__vizpush.getUuid();var e={body:notData.body,tag:"wln",icon:notData.icon,requireInteraction:!0,data:{url:notData.lp,ts:t,engid:-1,uuid:__vizpush.uuid,orchestrated:0}};if(notData.image&&notData.image.enabled&&(e.image=notData.image.url),notData.button&&notData.button.enabled){var s=notData.button.cta;e.actions=s;for(var n=1;n<=e.actions.length;n++)e.actions[n-1].action="cta"+n,e.data[__vizpush.ctaUrls[n-1]]=e.actions[n-1].lp}i.showNotification(notData.title,e).then(function(){}).then(function(){__vizpush.logEvent(e.data.engid,e.data.uuid,"PUSH",t),__vizpush.dismissNotification(i,e.data)}).catch(function(i){__vizpush.logError(i.message)})},S4:function(){return((1+Math.random())*65536|0).toString(16).substring(1)},getUuid:function(){return(__vizpush.S4()+__vizpush.S4()+"-"+__vizpush.S4()+"-4"+__vizpush.S4().substr(0,3)+"-"+__vizpush.S4()+"-"+__vizpush.S4()+__vizpush.S4()+__vizpush.S4()).toLowerCase()},migrate:function(){var i=!1;navigator.serviceWorker.getRegistrations().then(function(t){for(var e=0;e<t.length;e++)if(t[e].scope.indexOf(__vizpush.migDomain)>-1){i=!0,t[e].unregister().then(function(i){!0===i&&__vizpush.register()});break}i||__vizpush.register(),__vizpush.setCookie(__vizpush.fcmMigCookie,1,1460)}).catch(function(i){__vizpush.logError(i.message)})},register:function(){"serviceWorker"in navigator?navigator.serviceWorker.register(__vizpush.swLoc).then(function(i){if(/\/\w+\//.test(__vizpush.swLoc)){var t;i.installing?t=i.installing:i.waiting?t=i.waiting:i.active&&(t=i.active),t&&("activated"==t.state&&__vizpush.genSubscription(i),t.addEventListener("statechange",function(t){"activated"==t.target.state&&__vizpush.genSubscription(i)}))}else navigator.serviceWorker.ready.then(function(){__vizpush.genSubscription(i)}).catch(function(i){__vizpush.logState("NS"),__vizpush.logError(i.message)})}).catch(function(i){__vizpush.logError(i.message)}):__vizpush.logState("NS")},urlBase64ToUint8Array:function(i){let t="=".repeat((4-i.length%4)%4),e=(i+t).replace(/\-/g,"+").replace(/_/g,"/"),s=window.atob(e),n=new Uint8Array(s.length);for(let o=0;o<s.length;++o)n[o]=s.charCodeAt(o);return n},genSubscription:function(i){i.pushManager.getSubscription().then(function(t){"default"==Notification.permission&&(__vizpush.first=!0,__vizpush.logState("OP",1,"native"));let e=__vizpush.urlBase64ToUint8Array(__vizpush.vapidPublicKey);i.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e}).then(function(t){var e=t.getKey?t.getKey("p256dh"):"",s=e?btoa(String.fromCharCode.apply(null,new Uint8Array(e))):"",n=t.getKey?t.getKey("auth"):"",o=n?btoa(String.fromCharCode.apply(null,new Uint8Array(n))):"",a=t.endpoint;if(a=encodeURIComponent(a),s=encodeURIComponent(s),o=encodeURIComponent(o),a&&s&&o){if("AL"!==__vizpush.prevState){__vizpush.setCookie(__vizpush.stateCookie,"AL",1);var u=encodeURIComponent(document.URL),r="https://"+__vizpush.target+"/analyze/subMap?subid="+a+"&auth="+o+"&key="+s+"&version="+__vizpush.version+"&advid="+__vizpush.advid+"&action=AL&origin="+u+"&ck="+__vizpush.getCookie(__vizpush.fpc);__vizpush.first&&(r+="&useraction=1",wlcmEnabled&&__vizpush.sendWlPush(i)),fetch(r,{credentials:"include"})}}else __vizpush.logState("NS")}).catch(function(i){"denied"===Notification.permission?__vizpush.logState("BL"):"default"===Notification.permission&&/denied/.test(i)?(__vizpush.setCookie(__vizpush.dailyCookie,1,1),__vizpush.logState("CL")):__vizpush.logState("NS"),__vizpush.logError(i.message)})}).catch(function(i){__vizpush.logState("NS"),__vizpush.logError(i.message)})},later:function(){__vizpush.close(),__vizpush.setCookie(__vizpush.dailyCookie,1,1),__vizpush.logState("BL",1,"custom")},cross:function(){__vizpush.close(),__vizpush.setCookie(__vizpush.dailyCookie,1,1),__vizpush.logState("CL",1,"custom")},allow:function(i){i||(__vizpush.close(),__vizpush.logState("AL",1,"custom")),__vizpush.fcmMigState?__vizpush.register():__vizpush.migrate()},checkOptin:function(){!/interactive|complete/i.test(document.readyState)||__vizpush.isCallInitiated||(__vizpush.isCallInitiated=!0,"default"==Notification.permission&&__vizpush.isCOActive?__vizpush.hasPushSupport()?(__vizpush.prevState="",__vizpush.createDivElement(),__vizpush.logState("OP",1,"custom")):__vizpush.getCookie(__vizpush.pushSuppCookie)||(__vizpush.setCookie(__vizpush.pushSuppCookie,1,365),__vizpush.logState("NS")):(__vizpush.isCOActive||"default"!=Notification.permission||(__vizpush.prevState=""),__vizpush.allow(!0)))},init:function(){!__vizpush.getCookie(__vizpush.dailyCookie)&&"https:"===document.location.protocol&&__vizpush.showOptin()&&(__vizpush.prevState=__vizpush.getCookie(__vizpush.stateCookie),__vizpush.migState=__vizpush.getCookie(__vizpush.migCookie),__vizpush.fcmMigState=__vizpush.getCookie(__vizpush.fcmMigCookie),__vizpush.isCallInitiated=!1,/interactive|complete/i.test(document.readyState)?__vizpush.checkOptin():document.addEventListener("readystatechange",__vizpush.checkOptin))}};__vizpush.init();